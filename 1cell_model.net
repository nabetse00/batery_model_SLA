* C:\Users\esteb\Documents\ELEC\battery_model\1cell_model.asc
Db1 0 SOC Db
Db2 SOC N005 Db
Csoc SOC 0 {3600*{CAPAH}/(-{Rsoc}*log(1-100/{Rsoc}))}
Rsoc SOC 0 {Rsoc}
Vsoc N005 0 110
B1 N004 0 V=vcell(V(SOC))
V1 N001 N004 0
Ddischg N001 N002 Db
Dchg N003 N001 Db
Db3 0 N001 Db
Rdischg in+ N002 {Rdis}
Rchg in+ N003 {Rchg}
Db4 N001 N006 Db
V2 N006 0 2.39
B2 0 SOC I=I(V1)
I1 0 in+ PULSE(-1 1 1p 1p 1p 15m 30m 1)
.model D D
.lib C:\Users\esteb\Documents\LTspiceXVII\lib\cmp\standard.dio
.model Db D(Ron=1m Roff=1G Vfwd=1m  epsilon=1u revepsilon=1u N=0.01)
.func vcell(x)  a*log(b*x) + c*d**(e*x) + f*x +g
* a*np.log(b*x) + c*d**(e*x) + f*x +g)
.param a=1.33e-01 b=8.79e-01 c=8.99e-07 d=8.95e-01 e=-1.02 f=-1.10e-03 g=1.68
.tran 0 30m 0
.ic V(SOC)={soc}
.param capah=2.78u
.param Rsoc=1Meg
.param soc=1m
.param Rdis=6m Rchg=200m
.backanno
.end
